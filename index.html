<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <title>Frontend Mentor | Interactive rating component</title>

    <link rel="stylesheet" href="style.css" />

    <style>
      .attribution {
        font-size: 11px;
        text-align: center;
      }
      .attribution a {
        color: hsl(228, 45%, 44%);
      }
    </style>
  </head>
  <body>
    <div class="rate-container">
      <div class="star-container">
        <img src="images/icon-star.svg" class="star" alt="" />
      </div>
      <br />
      <h2>How did we do?</h2>
      <p>
        Please let us know how we did with your support request. All feedback is
        appreciated to help us improve our offering!
      </p>
      <form action="#">
        <div class="rating-buttons-container">
          <button class="ratings" type="button" value="1">1</button>
          <button class="ratings" type="button" value="2">2</button>
          <button class="ratings" type="button" value="3">3</button>
          <button class="ratings" type="button" value="4">4</button>
          <button class="ratings" type="button" value="5">5</button>
        </div>
        <br />
        <button type="submit" class="submit-rate">Submit</button>
      </form>
    </div>

    <div class="rated-container hide">
      <img
        src="images/illustration-thank-you.svg"
        class="illustration"
        alt=""
      />
      <p class="you-selected">
        You selected <span class="outOf"></span> out of 5
      </p>
      <h2 class="thank-you">Thank you!</h2>
      <p class="appreciate">
        We appreciate you taking the time to give a rating. If you ever need
        more support, donâ€™t hesitate to get in touch!
      </p>
    </div>

    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by <a href="#">Mark Angel Papio</a>.
    </div>

    <script>
      let ratings = document.querySelectorAll(".ratings");
      let submitRate = document.querySelector(".submit-rate");
      let form = document.querySelector("form");
      let rateContainer = document.querySelector(".rate-container");
      let ratedContainer = document.querySelector(".rated-container");
      let outOf = document.querySelector(".outOf");

      let rateScore = 0;

      for (let i = 0; i < ratings.length; i++) {
        ratings[i].addEventListener("click", (e) => {
          let currentlyActive = i;
          rateScore = ratings[i].value;
          console.log(rateScore);
          ratings[i].classList.add("active");
          for (let i = 0; i < ratings.length; i++) {
            if (i == currentlyActive) {
              continue;
            } else {
              ratings[i].classList.remove("active");
            }
          }
        });
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (rateScore != 0) {
          submitRate.classList.add("submit-active");
          setTimeout(function () {
            rateContainer.classList.toggle("hide");
            ratedContainer.classList.toggle("hide");
            ratedContainer.style.animation = "fadein 1.5s ease-out forwards";
            outOf.innerText = rateScore;
          }, 500);
        } else {
          if (!submitRate.style.animation) {
            submitRate.style.animation = "error 1s linear alternate ";
          }
        }
      });
    </script>
  </body>
</html>
